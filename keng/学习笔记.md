# 数据库查询语句
##  场景
推送时分批次发送，每次取10000的用户。当要取10000~20000的用户时，查询语句：
select msg_switch,fouce_id,rn from (select fouce_id,msg_switch,rownum as rn from table_name where public_id = 600000162 and rownum < 20000) 
where rn>1;


# Spring MVC
##  场景
外系统的http json是怎么匹配到具体的controller上的
##
@Controller、@Service 以及 @Repository 和 @Component 注解的作用是等价的：将一个类成为 Spring 容器的 Bean。由于 Spring MVC 的 Controller 必须事先是一个 Bean，所以 @Controller 注解是不可缺少的。


第一步：修改 web.xml
```
<servlet>
    <servlet-name>mvc-servlet</servlet-name>       --这个名字是自己定义的
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.do</url-pattern>            --表明要拦截哪些请求
</servlet-mapping>
```
第二步：修改 mvc-servlet.xml
```
<!-- 启动Spring MVC的注解功能，完成请求和注解POJO的映射 -->
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>
 <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">  
      <property name="interceptors">  
        <list>  
           <ref bean="localeInterceptor" />  
        </list>  
      </property>  
   </bean>  
```



# Java如何从HttpServletRequest中读取HTTP请求的body
##  场景
外系统通过http json请求注册交互中心用户
```
//字符串读取
 
void charReader(HttpServletRequest request) {
 BufferedReader br = request.getReader();
 String str, wholeStr = "";
 while((str = br.readLine()) != null){
  wholeStr += str;
 }
 System.out.println(wholeStr);
}
//二进制读取
 
void binaryReader(HttpServletRequest request) {
 int len = request.getContentLength();
 ServletInputStream iii = request.getInputStream();
 byte[] buffer = new byte[len];
 iii.read(buffer, 0, len);
}
```
